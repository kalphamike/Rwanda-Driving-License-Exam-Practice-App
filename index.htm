<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driving License Exam Practice - Rwanda</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .login-section, .exam-section, .results-section {
            padding: 30px;
        }

        .login-section {
            text-align: center;
        }

        .login-section h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .code-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
            font-family: monospace;
        }

        .code-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            display: block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .question-counter {
            text-align: center;
            color: #666;
            margin: 15px 0;
            font-size: 14px;
        }

        .timer-container {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }

        .timer {
            background: #f8f9fa;
            border-radius: 50px;
            padding: 10px 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #667eea;
        }

        .timer-icon {
            font-size: 24px;
        }

        .timer-normal {
            color: #333;
        }

        .timer-warning {
            color: #f59e0b;
            border-color: #f59e0b;
            background: #fff3e0;
        }

        .timer-danger {
            color: #ef4444;
            border-color: #ef4444;
            background: #fee2e2;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .timer-expired {
            color: #ef4444;
            border-color: #ef4444;
            background: #fee2e2;
        }

        .question {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-size: 18px;
            line-height: 1.6;
            color: #333;
            border-left: 5px solid #667eea;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            position: relative;
        }

        .option:hover:not(.disabled-option) {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #e8edff;
            transform: scale(1.02);
        }

        .option.correct-answer {
            border-color: #10b981;
            background: #d1fae5;
        }

        .option.wrong-answer {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .option.disabled-option {
            opacity: 0.8;
            cursor: default;
        }

        .option-prefix {
            font-weight: bold;
            margin-right: 15px;
            color: #667eea;
            font-size: 18px;
        }

        .feedback-icon {
            margin-left: auto;
            font-size: 20px;
            font-weight: bold;
        }

        .correct-icon {
            color: #10b981;
        }

        .wrong-icon {
            color: #ef4444;
        }

        .answer-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feedback-correct {
            background: #d1fae5;
            border: 1px solid #10b981;
            color: #065f46;
        }

        .feedback-wrong {
            background: #fee2e2;
            border: 1px solid #ef4444;
            color: #991b1b;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 20px;
        }

        .nav-btn {
            flex: 1;
            padding: 12px;
            background: #f0f0f0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .nav-btn:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .stats-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat-item {
            flex: 1;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .results-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: white;
            font-size: 36px;
            font-weight: bold;
        }

        .result-message {
            font-size: 24px;
            margin: 20px 0;
            color: #333;
        }

        .pass {
            color: #10b981;
        }

        .fail {
            color: #ef4444;
        }

        .badge {
            background: #ffd700;
            color: #333;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            display: inline-block;
            margin: 10px 0;
        }

        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }

        .share-btn {
            background: #25D366;
            margin: 5px auto;
            display: block;
            width: 100%;
            max-width: 300px;
        }

        .share-btn.whatsapp {
            background: #25D366;
        }

        .share-btn.copy {
            background: #667eea;
        }

        .error-message {
            color: #ef4444;
            margin-top: 10px;
        }

        @media (max-width: 600px) {
            .container {
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .question {
                padding: 20px;
                font-size: 16px;
            }
            
            .timer {
                font-size: 20px;
                padding: 8px 20px;
            }
        }

        .info-box {
            background: #e8edff;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .info-box p {
            margin: 5px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- Login Section -->
        <div v-if="!isLoggedIn" class="login-section">
            <div class="header">
                <h1>üöó Rwanda Driving License Exam</h1>
                <p>Practice Test - Series 1</p>
            </div>
            
            <div style="padding: 30px;">
                <div class="info-box">
                    <p><strong>üìã Instructions:</strong></p>
                    <p>‚Ä¢ 20 questions in this series</p>
                    <p>‚Ä¢ 1 minute per question</p>
                    <p>‚Ä¢ Need 16 correct to pass (80%)</p>
                    <p>‚Ä¢ Answer will be shown immediately</p>
                </div>

                <h2>Enter Access Code</h2>
                <input 
                    type="password" 
                    class="code-input" 
                    v-model="accessCode"
                    placeholder="Enter code"
                    @keyup.enter="login"
                >
                <button class="btn" @click="login" :disabled="!accessCode">
                    Start Exam
                </button>
                <p v-if="loginError" class="error-message">{{ loginError }}</p>
                
                <div class="share-section">
                    <p style="margin-bottom: 15px; color: #666;">Share with friends</p>
                    <button class="btn share-btn whatsapp" @click="shareWhatsApp">
                        üì± Share on WhatsApp
                    </button>
                </div>
            </div>
        </div>

        <!-- Exam Section -->
        <div v-else-if="!examCompleted" class="exam-section">
            <div class="header" style="padding: 20px;">
                <h2>Series {{ currentSeries }} of {{ totalSeries }}</h2>
                <p>Passing score: 80% (16/20 correct) ‚Ä¢ 1 minute per question</p>
            </div>

            <div class="stats-panel">
                <div class="stat-item">
                    <div class="stat-value">{{ answeredCount }}/20</div>
                    <div class="stat-label">Answered</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ correctCount }}</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ wrongCount }}</div>
                    <div class="stat-label">Wrong</div>
                </div>
            </div>

            <!-- Timer Display -->
            <div class="timer-container">
                <div class="timer" :class="timerClass">
                    <span class="timer-icon">‚è±Ô∏è</span>
                    <span>{{ formattedTime }}</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" :style="{ width: progressPercentage + '%' }"></div>
            </div>

            <div class="question-counter">
                Question {{ currentQuestionIndex + 1 }} of 20
            </div>

            <div class="question">
                {{ currentQuestion.text }}
            </div>

            <div class="options">
                <div 
                    v-for="(option, index) in currentQuestion.options" 
                    :key="index"
                    class="option" 
                    :class="{
                        'selected': selectedAnswers[currentQuestionIndex] === index,
                        'correct-answer': questionAnswered && index === currentQuestion.correct,
                        'wrong-answer': questionAnswered && selectedAnswers[currentQuestionIndex] === index && index !== currentQuestion.correct,
                        'disabled-option': questionAnswered || timeExpired
                    }"
                    @click="!questionAnswered && !timeExpired && selectAnswer(index)"
                >
                    <span class="option-prefix">{{ String.fromCharCode(65 + index) }}.</span>
                    {{ option }}
                    <span v-if="questionAnswered && index === currentQuestion.correct" class="feedback-icon correct-icon">‚úì</span>
                    <span v-if="questionAnswered && selectedAnswers[currentQuestionIndex] === index && index !== currentQuestion.correct" class="feedback-icon wrong-icon">‚úó</span>
                </div>
            </div>

            <!-- Time Expired Message -->
            <div v-if="timeExpired && !questionAnswered" class="answer-feedback feedback-wrong">
                <span class="wrong-icon">‚è∞</span>
                <span>
                    <strong>Igihe cyarangiye! </strong> 
                    Igisubizo ni: {{ currentQuestion.options[currentQuestion.correct] }}
                </span>
            </div>

            <!-- Immediate feedback after answering -->
            <div v-else-if="questionAnswered" class="answer-feedback" :class="isCurrentAnswerCorrect ? 'feedback-correct' : 'feedback-wrong'">
                <span v-if="isCurrentAnswerCorrect" class="correct-icon">‚úÖ</span>
                <span v-else class="wrong-icon">‚ùå</span>
                <span>
                    <strong v-if="isCurrentAnswerCorrect">Correct!</strong>
                    <strong v-else>Wakishe! Igisubizo ni:</strong>
                    {{ currentQuestion.options[currentQuestion.correct] }}
                </span>
            </div>

            <div class="navigation">
                <button class="nav-btn" @click="previousQuestion" :disabled="currentQuestionIndex === 0">
                    ‚¨Ö Previous
                </button>
                <button class="nav-btn" @click="nextQuestion" :disabled="currentQuestionIndex === 19">
                    Next ‚û°
                </button>
            </div>

            <button 
                class="btn" 
                @click="submitExam" 
                :disabled="!allQuestionsAnswered"
                style="margin-top: 20px;"
            >
                Submit Exam ({{ remainingCount }} remaining)
            </button>
        </div>

        <!-- Results Section -->
        <div v-else class="results-section">
            <div class="header" style="padding: 20px;">
                <h2>Exam Results - Series {{ currentSeries }}</h2>
            </div>

            <div class="results-card">
                <div class="score-circle">
                    {{ scorePercentage }}%
                </div>

                <div class="result-message" :class="hasPassed ? 'pass' : 'fail'">
                    {{ hasPassed ? 'üéâ Congratulations! You Passed!' : 'üòî You did not pass this series' }}
                </div>

                <p>You got {{ score }} out of 20 correct</p>
                
                <div class="stats-panel" style="margin: 20px 0;">
                    <div class="stat-item">
                        <div class="stat-value">{{ correctCount }}</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ wrongCount }}</div>
                        <div class="stat-label">Wrong</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">{{ timeoutsCount }}</div>
                        <div class="stat-label">Timeouts</div>
                    </div>
                </div>
                
                <div v-if="hasPassed" class="badge">
                    ‚úÖ Series {{ currentSeries }} Completed - Next Series Unlocked!
                </div>
                
                <div v-else class="badge" style="background: #ef4444; color: white;">
                    You need 16 correct to pass. You got {{ score }}.
                </div>

                <div style="margin-top: 30px;">
                    <button class="btn" @click="nextSeries" v-if="hasPassed && currentSeries < totalSeries">
                        Start Series {{ currentSeries + 1 }} ‚û°
                    </button>
                    <button class="btn" @click="retrySeries" v-if="!hasPassed">
                        üîÑ Retry Series {{ currentSeries }}
                    </button>
                    <button class="btn" @click="logout" style="background: #6c757d;">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                // Authentication
                isLoggedIn: false,
                accessCode: '',
                loginError: '',
                validCode: 'RTYew23o0r',
                
                // Exam data
                allQuestions: [],
                currentSeries: 1,
                totalSeries: 10,
                currentQuestionIndex: 0,
                selectedAnswers: Array(20).fill(null),
                examCompleted: false,
                
                // Timer data
                timeRemaining: 60,
                timerInterval: null,
                timeExpired: false,
                
                // Progress tracking
                completedSeries: []
            },
            computed: {
                currentQuestions() {
                    const startIdx = (this.currentSeries - 1) * 20;
                    return this.allQuestions.slice(startIdx, startIdx + 20);
                },
                currentQuestion() {
                    return this.currentQuestions[this.currentQuestionIndex] || { text: '', options: [], correct: 0 };
                },
                questionAnswered() {
                    return this.selectedAnswers[this.currentQuestionIndex] !== null;
                },
                isCurrentAnswerCorrect() {
                    if (!this.questionAnswered) return false;
                    return this.selectedAnswers[this.currentQuestionIndex] === this.currentQuestion.correct;
                },
                progressPercentage() {
                    return ((this.currentQuestionIndex + 1) / 20) * 100;
                },
                answeredCount() {
                    return this.selectedAnswers.filter(a => a !== null).length;
                },
                correctCount() {
                    let count = 0;
                    this.currentQuestions.forEach((q, idx) => {
                        if (this.selectedAnswers[idx] === q.correct) count++;
                    });
                    return count;
                },
                wrongCount() {
                    let count = 0;
                    this.currentQuestions.forEach((q, idx) => {
                        if (this.selectedAnswers[idx] !== null && this.selectedAnswers[idx] !== q.correct) count++;
                    });
                    return count;
                },
                timeoutsCount() {
                    let count = 0;
                    this.currentQuestions.forEach((q, idx) => {
                        if (this.selectedAnswers[idx] === null) count++;
                    });
                    return count;
                },
                remainingCount() {
                    return 20 - this.answeredCount;
                },
                allQuestionsAnswered() {
                    return this.answeredCount === 20;
                },
                score() {
                    return this.correctCount;
                },
                scorePercentage() {
                    return Math.round((this.score / 20) * 100);
                },
                hasPassed() {
                    return this.score >= 16;
                },
                formattedTime() {
                    const minutes = Math.floor(this.timeRemaining / 60);
                    const seconds = this.timeRemaining % 60;
                    return `${minutes}:${seconds.toString().padStart(2, '0')}`;
                },
                timerClass() {
                    if (this.timeRemaining <= 0) return 'timer-expired';
                    if (this.timeRemaining <= 10) return 'timer-danger';
                    if (this.timeRemaining <= 30) return 'timer-warning';
                    return 'timer-normal';
                }
            },
            watch: {
                currentQuestionIndex() {
                    this.resetTimer();
                },
                timeRemaining(value) {
                    if (value <= 0 && !this.questionAnswered && !this.timeExpired) {
                        this.handleTimeout();
                    }
                }
            },
            methods: {
                login() {
                    if (this.accessCode === this.validCode) {
                        this.isLoggedIn = true;
                        this.loginError = '';
                        this.loadQuestions();
                        this.loadProgress();
                        this.startTimer();
                    } else {
                        this.loginError = 'Invalid access code. Please try again.';
                    }
                },
                
                logout() {
                    this.stopTimer();
                    this.isLoggedIn = false;
                    this.accessCode = '';
                    this.currentSeries = 1;
                    this.resetExam();
                },
                
                loadQuestions() {
                    this.allQuestions = [
                        {
                            text: "Ikinyabiziga cyose cyangwa ibinyabiziga bigenda bigomba kugira:",
                            options: ["Umuyobozi", "Umuherekeza", "A na B ni ibisubizo by'ukuri", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 2
                        },
                        {
                            text: "Ijambo 'akayira' bivuga inzira nyabagendwa ifunganye yagenewe gusa:",
                            options: ["Abanyamaguru", "Ibinyabiziga bigendera ku biziga bibiri", "A na B ni ibisubizo by'ukuri", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 0
                        },
                        {
                            text: "Ahantu ho kugendera mu muhanda herekanwa n'ibimenyetso bimiruka ibinyabiziga ntibishobora kuhagenda:",
                            options: ["Biteganye", "Ku murongo umwe", "A na B nibyo", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 2
                        },
                        {
                            text: "Ibinyabiziga bikurikira bigomba gukorerwa isuzumwa buri mwaka:",
                            options: [
                                "Ibinyabiziga bigenewe gutwara abagenzi muri rusange",
                                "Ibinyabiziga bigenewe gutwara ibintu birenejeje toni 3.5",
                                "Ibinyabiziga bigenewe kwigisha gutwara",
                                "Nta gisubizo cy'ukuri kirimo"
                            ],
                            correct: 2
                        },
                        {
                            text: "Ubugari bwa romoruki ikuruwe n'ikinyamitende itatu ntibugomba kurenza ibipimo bikurikira:",
                            options: ["cm75", "cm125", "cm265", "Nta gisubizo cy'ukuri"],
                            correct: 2
                        },
                        {
                            text: "Uburebure bw'ibinyabiziga bikurikira ntibugomba kurenga metero 11:",
                            options: [
                                "Ibifite umutambiko umwe uhuza imipira",
                                "Ibifite imitambiko ibiri ikurikiranye mu bugari bwayo",
                                "Makuzungu",
                                "Nta gisubizo cy'ukuri"
                            ],
                            correct: 1
                        },
                        {
                            text: "Ikinyabiziga kibujijwe guhagarara akanya kanini aha hakurikira:",
                            options: [
                                "Ahatareneje metero 1 imbere cyangwa inyuma y'ikinyabiziga gihagaze akanya gato cyangwa kanini",
                                "Ahantu hari ibimenyetso bibuza byabugenewe",
                                "Aho abanyamaguru banyura mu muhanda ngo bakikire inkomyi",
                                "Ibisubizo byose nibyo"
                            ],
                            correct: 3
                        },
                        {
                            text: "Kunyuranaho bikorerwa:",
                            options: [
                                "Mu ruhande rw'iburyo gusa",
                                "Igihe cyose ni ibumoso",
                                "Iburyo iyo unyura ku nyamaswa",
                                "Nta gisubizo cy'ukuri kirimo"
                            ],
                            correct: 0
                        },
                        {
                            text: "Icyapa cyerekana umuvuduko ntarengwa ikinyabiziga kitagomba kurenza gishyirwa gusa ku binyabiziga bifite uburemere ntarengwa bukurikira:",
                            options: ["Burenga toni 1", "Burenga toni 2", "Burenga toni 24", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 1
                        },
                        {
                            text: "Ahatari mu nsisiro umuvuduko ntarengwa mu isaha wa velomoteri ni:",
                            options: ["Km50", "Km40", "Km30", "Nta gisubizo cy'ukuri"],
                            correct: 0
                        },
                        {
                            text: "Ku byerekeye kwerekana ibinyabiziga n'ukumurika kwabyo ndetse no kwerekana ihindura ry'ibyerekezo byabyo. Birabujijwe gukora andi matara cyangwa utugararumarumi uretse ibitegetswe ariko ntibireba amatara akurikira:",
                            options: [
                                "Amatara ndanga",
                                "Amatara ari imbere mu modoka",
                                "Amatara ndangaburambarare",
                                "Ibisubizo byose nibyo"
                            ],
                            correct: 1
                        },
                        {
                            text: "Iyo nta mategeko awugabanya by'umwihariko umuvuduko ntarengwa w'amapikipiki mu isaha ni:",
                            options: ["Km25", "Km70", "Km40", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 1
                        },
                        {
                            text: "Uburyo bukoreshwa kugirango ikinyabiziga kigende gahoro igihe feri idakora neza babwita:",
                            options: [
                                "Feri y'urugendo",
                                "Feri yo guhagarara umwanya munini",
                                "Feri yo gutabara",
                                "Nta gisubizo cy'ukuri kirimo"
                            ],
                            correct: 2
                        },
                        {
                            text: "Nibura ikinyabiziga gitegetswe kugira uduhanagurakirahure tungahe:",
                            options: ["2", "3", "1", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 2
                        },
                        {
                            text: "Amatara maremare y'ikinyabiziga agomba kuzimwa mu bihe bikurikira:",
                            options: [
                                "Iyo umuhanda umurikiye umuyobozi abasha kureba muri metero 20",
                                "Iyo ikinyabiziga kigiye kubisikana n'ibindi",
                                "Iyo ari mu nsisiro",
                                "Ibisubizo byose ni ukuri"
                            ],
                            correct: 1
                        },
                        {
                            text: "Ikinyabiziga ntigishobora kugira amatara arenga abiri y'ubwoko bumwe keretse kubyerekeye amatara akurikira:",
                            options: [
                                "Itara ndangamubvimba",
                                "Itara ryerekana icyerekezo",
                                "Itara ndangaburumbarare",
                                "Ibisubizo byose ni ukuri"
                            ],
                            correct: 3
                        },
                        {
                            text: "Ubugari bwa romoruki ikuruwe n'igare cyangwa velomoteri ntiburenza ibipimo bikurikira:",
                            options: ["cm25", "cm125", "cm45", "Nta gisubizo cy'ukuri kirimo"],
                            correct: 2
                        },
                        {
                            text: "Itara ryo guhagarara ry'ibara ritukura rigomba kugaragara igihe ijuru rikeye nibura mu ntera ikurikira:",
                            options: [
                                "Metero 100 ku manywa na metero 20 mu ijoro",
                                "Metero 150 ku manywa na metero 50 mu ijoro",
                                "Metero 200 ku manywa na metero 100 mu ijoro",
                                "Nta gisubizo cy'ukuri kirimo"
                            ],
                            correct: 1
                        },
                        {
                            text: "Iyo umuvuduko w'ibinyabiziga bidapakiye ushobora kurenga km50 mu isaha ahategamye, bigomba kuba bifite ibikoresho by'ihoni byumvikanira mu ntera:",
                            options: ["Metero 100", "Metero 200", "Metero 50", "Metero 150"],
                            correct: 2
                        },
                        {
                            text: "Ubugari bwa romoruki ntiburenza ubugari bw'ikinyabiziga kiyikurura iyo ikuruwe n'ibinyabiziga bikurikira:",
                            options: [
                                "Igare",
                                "Velomoteri",
                                "Ipikipiki ifite akanyabiziga kometse ku ruhande rwayo",
                                "Nta gisubizo cy'ukuri kirimo"
                            ],
                            correct: 2
                        }
                    ];
                },
                
                loadProgress() {
                    const saved = localStorage.getItem('drivingExamProgress');
                    if (saved) {
                        const progress = JSON.parse(saved);
                        this.currentSeries = progress.currentSeries || 1;
                        this.completedSeries = progress.completedSeries || [];
                    }
                },
                
                saveProgress() {
                    localStorage.setItem('drivingExamProgress', JSON.stringify({
                        currentSeries: this.currentSeries,
                        completedSeries: this.completedSeries
                    }));
                },
                
                startTimer() {
                    this.stopTimer();
                    this.timeRemaining = 60;
                    this.timeExpired = false;
                    this.timerInterval = setInterval(() => {
                        if (this.timeRemaining > 0 && !this.questionAnswered) {
                            this.timeRemaining--;
                        }
                    }, 1000);
                },
                
                stopTimer() {
                    if (this.timerInterval) {
                        clearInterval(this.timerInterval);
                        this.timerInterval = null;
                    }
                },
                
                resetTimer() {
                    this.stopTimer();
                    this.timeRemaining = 60;
                    this.timeExpired = false;
                    this.startTimer();
                },
                
                handleTimeout() {
                    this.timeExpired = true;
                },
                
                selectAnswer(index) {
                    this.$set(this.selectedAnswers, this.currentQuestionIndex, index);
                    this.stopTimer();
                },
                
                previousQuestion() {
                    if (this.currentQuestionIndex > 0) {
                        this.currentQuestionIndex--;
                        this.stopTimer();
                        this.startTimer();
                    }
                },
                
                nextQuestion() {
                    if (this.currentQuestionIndex < 19) {
                        this.currentQuestionIndex++;
                        this.stopTimer();
                        this.startTimer();
                    }
                },
                
                submitExam() {
                    if (!this.allQuestionsAnswered) return;
                    this.stopTimer();
                    this.examCompleted = true;
                    
                    if (this.hasPassed && !this.completedSeries.includes(this.currentSeries)) {
                        this.completedSeries.push(this.currentSeries);
                        this.saveProgress();
                    }
                },
                
                resetExam() {
                    this.stopTimer();
                    this.currentQuestionIndex = 0;
                    this.selectedAnswers = Array(20).fill(null);
                    this.examCompleted = false;
                    this.timeRemaining = 60;
                    this.timeExpired = false;
                    this.startTimer();
                },
                
                nextSeries() {
                    if (this.currentSeries < this.totalSeries) {
                        this.currentSeries++;
                        this.resetExam();
                    }
                },
                
                retrySeries() {
                    this.resetExam();
                },
                
                shareWhatsApp() {
                    const text = `Practice for Rwanda Driving License Exam!\nAccess Code: ${this.validCode}\nOpen this link in your browser: ${window.location.href}`;
                    window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
                }
            },
            beforeDestroy() {
                this.stopTimer();
            }
        });
    </script>
</body>
</html>
